<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web App Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>Telegram Web App Test</h1>
    <button onclick="sendData()">Send Test Data</button>
    
    <div id="log"></div>
    
    <script>
        const tg = window.Telegram.WebApp;
        const log = document.getElementById('log');
        
        // Initialize
        tg.ready();
        tg.expand();
        
        function addLog(msg) {
            log.innerHTML += `<p>${msg}</p>`;
        }
        
        addLog('Web App initialized');
        addLog('Version: ' + tg.version);
        addLog('Platform: ' + tg.platform);
        
        function sendData() {
            const testData = {
                action: 'test',
                timestamp: Date.now()
            };
            
            addLog('Sending data: ' + JSON.stringify(testData));
            
            try {
                tg.sendData(JSON.stringify(testData));
                addLog('Data sent successfully');
                
                // Close after 1 second
                setTimeout(() => {
                    addLog('Closing...');
                    tg.close();
                }, 1000);
            } catch (error) {
                addLog('Error: ' + error.message);
            }
        }
    </script>
</body>
</html>